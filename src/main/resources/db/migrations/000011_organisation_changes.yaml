databaseChangeLog:
  - changeSet:
      id: 000011_organisation_changes
      author: Henry Jobst
      preConditions:
        - onFail: MARK_RAN
        - not:
            - columnExists:
                tableName: ORGANISATION
                column: TYPE
      comment: Add fields to Table organisation
      changes:
        - changes:
            - addColumn:
                tableName: ORGANISATION
                columns:
                  - column:
                      name: TYPE
                      type: VARCHAR(60)
                      defaultValue: 'OTHER'
                      constraints:
                        nullable: false
                  - column:
                      name: COUNTRY_ID
                      type: BIGINT
                      defaultValueNumeric: 1
                      constraints:
                        nullable: false
                        foreignKeyName: FK_ORGANISATION_COUNTRY
        - createIndex:
            tableName: ORGANISATION
            columns:
              - column:
                  name: TYPE
            indexName: IDX_ORGANISATION_TYPE
        - addForeignKeyConstraint:
            baseTableName: ORGANISATION
            baseColumnNames: COUNTRY_ID
            constraintName: FK_ORGANISATION_COUNTRY
            referencedTableName: COUNTRY
            referencedColumnNames: ID
            onDelete: RESTRICT
            onUpdate: RESTRICT
